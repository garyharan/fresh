<div class="w-full md:w-9/12 mx-auto mt-10">
  <%= render 'steps' %>

  <%= form_with(model: @profile) do |form| %>
    <% if @profile.errors.any? %>
      <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-lg mt-3">
        <h2><%= pluralize(@profile.errors.count, "error") %> prohibited this profile from being saved:</h2>

        <ul>
          <% @profile.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="flex flex-col w-full">
      <div class="m-5">
        <%= form.label t(:display_name), class: "block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300" %>
        <%= form.text_field :display_name, class: "block shadow rounded-md border text-slate-800 border-gray-200 outline-none px-3 py-2 mt-2 w-full" %>
      </div>

      <div class="m-5">
        <h2 class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">Gender</h2>
        <ul class="grid gap-2 w-full md:grid-cols-3">
          <% Gender.all.each_with_index do |option, index| %>
            <li>
              <%= form.radio_button :gender, option.id, class: "hidden peer", id: "gender_option_#{index}" %>
              <%= form.label :gender, option.label, for: "gender_option_#{index}", class: "inline-flex justify-between items-center p-3 pl-5 w-full text-gray-500 bg-white rounded-full border border-gray-200 cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700" %>
            </li>
          <% end %>
        </ul>
      </div>

      <div class="m-5">
        <%= form.label t(:born_on), class: "block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300" %>
        <div class="flex flex-row justify-center">
          <%= form.date_select(:born_on, {
            order: [:day, :month, :year], start_year: 1920, end_year: 2004, default: 18.years.ago,
            with_css_classes:
              {
                day:   "inline-flex min-w-fit h-12 border border-r-0 focus:border-x-2 items-center px-3 focus:outline-none rounded-l-md border-gray-300 bg-gray-50 text-gray-500 text-sm w-1/3",
                month: "inline-flex grow border focus:border-x-2 bg-gray-50 border-gray-300 text-gray-900 text-xs md:text-sm leading-6 focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",
                year:  "m-0 bg-gray-50 border border-l-0 focus:border-l-2 rounded-r-md border-gray-300 text-gray-900 text-xs md:text-sm leading-6 focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              }
            }
          ) %>
        </div>
      </div>
    </div>

    <div class="w-full">
      <div class="mx-5">
        <%= form.label :location, class: "text-sm font-medium text-gray-900 dark:text-gray-300" %>
          <%= form.hidden_field :lat, "data-location-target": "lat", class: "block shadow rounded-md border text-slate-800 border-gray-200 outline-none px-3 py-2 mt-2 w-full" %>
          <%= form.hidden_field :lon, "data-location-target": "lon", class: "block shadow rounded-md border text-slate-800 border-gray-200 outline-none px-3 py-2 mt-2 w-full" %>

          <div class="flex flex-row gap-1">
              <div class="mt-1 flex w-1/3 rounded-md shadow-sm">
                <%= form.text_field :city, "data-location-target": "city", placeholder: t(:city), class: "py-3 px-2 outline-none flex-1 block rounded-md sm:text-sm border border-gray-300" %>
              </div>

              <div class="mt-1 flex w-1/3 rounded-md shadow-sm">
                <%= form.text_field :state, "data-location-target": "state", placeholder: t(:province_or_state), class: "py-3 px-2 outline-none flex-1 block rounded-md sm:text-sm border border-gray-300" %>
              </div>

              <div class="mt-1 flex w-1/3 rounded-md shadow-sm">
                <%= form.text_field :country, "data-location-target": "country", placeholder: t(:country), class: "py-3 px-2 outline-none flex-1 block rounded-md sm:text-sm border border-gray-300" %>
              </div>
          </div>
      </div>
    </div>

    <div class="grid justify-items-stretch">
      <div class="w-fit justify-self-center mr-4 mt-10">
        <%= form.submit "Next", class: "justify-self-end text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-32 px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" %>
      </div>
    </div>

  <% end %>
</div>

