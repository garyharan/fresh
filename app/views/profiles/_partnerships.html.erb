<% if profile.partnerships.confirmed.any? %>
  <div class="flex flex-col items-center justify-center mt-4">
    <div class="text-sm font-semibold mr-2 w-full text-center">
      Partnered with:
    </div>

    <% profile.partnerships.confirmed.each do |partnership| %>
      <%= link_to profile_path(partnership.to_profile) do %>
        <div class="flex flex-row items-center justify-center">
          <%= image_tag partnership.to_profile.images.first.photo.variant(:thumb), class: "w-10 h-10 border-2 rounded-full bg-white", alt: partnership.to_profile.display_name if partnership.to_profile.images.any? && partnership.to_profile.images.first.photo.present? %>
          <div class="text-md font-semibold ml-2">
        <%= partnership.to_profile.display_name %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
<% else %>
  <% if matched?(profile) && marked_as_partner?(profile) %>
    <div class="flex flex-col items-center justify-center mt-4">
      <div class="text-sm font-semibold mr-2 w-full text-center">
        This user has not yet marked you as their partner. You will appear here when they do.
      </div>
    </div>
  <% end %>
<% end %>

<% if matched?(profile) %>
  <div class="flex flex-col items-center justify-center my-4">
    <% if Current.user.profile.partnerships.exists?(to_profile: profile) %>
      <%= link_to "Remove #{profile.display_name} as my partner", partnership_url(profile_id: profile.id),
        method: :delete,
        class: "hotwire-native:hidden rounded text-red-500 text-xs px-4 py-2",
        data: {
          turbo_confirm: "Are you sure you want to remove this profile as your partner?",
          turbo_method: :delete,
          turbo_action: "replace",
          controller: "bridge--button",
          bridge_position: "right",
          bridge_title: "Remove as my partner",
          bridge_ios_image: "person.crop.circle.badge.minus",
          bridge_android_image: "group_off",
          bridge_vibrate: true
        }
      %>
    <% else %>
      <%= link_to "Mark #{profile.display_name} as my partner", partnerships_url(profile_id: profile.id),
          method: :post,
          class: "hotwire-native:hidden rounded text-blue-500 text-white text-xs px-4 py-2",
          data: {
            turbo_confirm: "Are you sure you want to mark this profile as your partner?",
            turbo_method: :post,
            turbo_action: "replace",
            controller: "bridge--button",
            bridge_position: "right",
            bridge_title: "Mark as my partner",
            bridge_ios_image: "person.crop.circle.badge.plus",
            bridge_android_image: "group",
            bridge_vibrate: true
          }
      %>
    <% end %>
  </div>
<% end %>
