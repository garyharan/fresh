<% content_for(:title, "Preferences") %>

<section class="w-full min-h-screen flex flex-col px-2" aria-label="Sidebar">
  <p class="m-4">Set maximum distance for matches</p>

  <%= form_with(model: @user.profile) do |form| %>

    <div data-controller="distance">
      <%= form.range_field :maximum_distance, min: 100_000, max: 4_000_000, "data-distance-target": "input", class: "bg-gray-200 w-full h-2 rounded-lg appearance-none cursor-pointer dark:bg-gray-700" %>
      <p data-distance-target="display" class="inline-flex text-slate-800 border-gray-200 outline-none"></p>
      <span data-distance-target="saved" class="text-xs text-green-600 inline-flex place-content-center opacity-0 transition-opacity duration-1000">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        saved!
      </span>


      <span data-distance-target="error" class="text-xs text-red-600 inline-flex opacity-0 transition-opacity duration-1000">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        An error occurred preventing us to save your maximum distance.
      </span>
    </div>

    <h2>Genders you are attracted to:</h2>
    <ul class="grid gap-2 xl:grid-cols-3">
      <%= form.collection_check_boxes(:gender_ids, Gender.all, :id, :label) do |box| %>
        <li>
          <%= box.check_box class: "hidden peer", id: "profile_gender_ids_#{box.object.id}" %>
          <%= box.label for: "profile_gender_ids_#{box.object.id}", class: "#{@profile.errors[:attractions].any? ? 'border-red-500 bg-red-50' : 'bg-white border-gray-200'} inline-flex justify-between items-center p-3 pl-5 w-full text-gray-500 rounded-full border cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-blue-500 peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700" do %>
            <%= box.object.label.pluralize %>
          <% end %>
        </li>
      <% end %>
    </ul>

    <div class="mt-4">
      <%= form.submit "Save Preferences", class: "rounded-lg py-2 px-4 bg-blue-600 text-white font-medium cursor-pointer hover:bg-blue-500 active:bg-blue-400" %>
    </div>
  <% end %>



<!--

  <%= form_for @user, method: :patch, data: { controller: "distance",  "distance-units-value": (@user.profile.country == 'United States' ? 'imperial' : 'metric') } do |form| %>

    <div class="m-5">
      <h2 class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"><%= error_messages_for(@user, :maximum_distance) %></h2>
      <%= form.range_field :maximum_distance, min: 100_000, max: 4_000_000, class: "#{@user.errors[:distance].any? ? 'bg-red-50 border-red-500' : 'bg-gray-200'} w-full h-2 rounded-lg appearance-none cursor-pointer dark:bg-gray-700", "data-distance-target": "input" %>
      <div class="flex flex-row justify-content-center mt-4">

        <p data-distance-target="display" class="inline-flex text-slate-800 border-gray-200 outline-none"></p>

        <span data-distance-target="saved" class="text-xs text-green-600 inline-flex place-content-center opacity-0 transition-opacity duration-1000">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          saved!
        </span>

        <span data-distance-target="error" class="text-xs text-red-600 inline-flex opacity-0 transition-opacity duration-1000">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          An error occurred preventing us to save your maximum distance.
        </span>
      </div>
    </div>
  <% end %>
-->

  <div class="inline-block absolute bottom-4 w-full hotwire-native:hidden">
    <div class="flex justify-center items-center">
      <%= link_to "Logout", session_path, method: :delete, class: "rounded-lg py-3 px-5 bg-red-600 text-white inline-block font-medium cursor-pointer hover:bg-red-500 active:bg-red-400 mx-4", data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to sign out?"}  %>
    </div>
  </div>
</section>
